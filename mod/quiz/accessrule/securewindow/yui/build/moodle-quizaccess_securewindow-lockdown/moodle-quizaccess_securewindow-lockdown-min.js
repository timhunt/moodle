YUI.add("moodle-quizaccess_securewindow-lockdown",function(e,t){M.quizaccess_securewindow=M.quizaccess_securewindow||{},M.quizaccess_securewindow.lockdown={start_attempt_action:function(e,t){t.startattemptwarning===""?openpopup(e,t):M.util.show_confirm_dialog(e,{message:t.startattemptwarning,callback:function(){openpopup(e,t)},continuelabel:M.util.get_string("startattempt","quiz")})},init_attempt_page:function(e){function t(){window.status="",setTimeout(t,10)}function n(e){alert(M.str.quiz.functiondisabledbysecuremode),e.halt()}function r(e){if(e.button===1&&/^(INPUT|TEXTAREA|BUTTON|SELECT|LABEL|A)$/i.test(e.target.get("tagName")))return;e.halt()}t(),window.location.href.substring(0,4)==="file"&&(window.location="about:blank"),e.delegate("contextmenu",n,document,"*"),e.delegate("mousedown",r,document,"*"),e.delegate("mouseup",r,document,"*"),e.delegate("dragstart",n,document,"*"),e.delegate("selectstart",n,document,"*"),e.delegate("cut",n,document,"*"),e.delegate("copy",n,document,"*"),e.delegate("paste",n,document,"*"),e.on("beforeprint",function(){e.one(document.body).setStyle("display","none")},window),e.on("afterprint",function(){e.one(document.body).setStyle("display","block")},window),e.on("key",n,"*","press:67,86,88+ctrl"),e.on("key",n,"*","up:67,86,88+ctrl"),e.on("key",n,"*","down:67,86,88+ctrl"),e.on("key",n,"*","press:67,86,88+meta"),e.on("key",n,"*","up:67,86,88+meta"),e.on("key",n,"*","down:67,86,88+meta");var i=e.one("#finishreviewlink");i&&i.on("click",function(e){M.quizaccess_securewindow.lockdown.close(e.target.href,0)})},close:function(e,t){setTimeout(function(){window.opener?(window.opener.document.location.reload(),window.close()):window.location.href=M.cfg.wwwroot+"/mod/quiz/view.php?id="+cmid},t*1e3)}}},"@VERSION@",{requires:["base","node","event","dom"]});
